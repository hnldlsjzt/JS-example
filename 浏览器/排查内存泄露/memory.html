<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="grow">start</button>
    <script>
      //   // 点击按钮，就执行一次函数，申请一块内存
      //   var arr = [];
      //   function grow() {
      //     var a = new Array(2000000).fill(1);
      //     var b = new Array(2000000).fill(1);
      //     arr.push(b);
      //   }
      //   document.getElementById("grow").addEventListener("click", grow);

      var t = null;
      var replaceThing = function () {
        var o = t;
        var unused = function () {
          // 闭包了，会一直引用上次的 t
        //   if (o) {
        //     console.log("hi");
        //   }
        };
        t = {
          longStr: new Array(1000000).fill("*"),
          someMethod: function () {
            console.log(1);
          },
        };
      };
      setInterval(replaceThing, 100);
      var btnEl = document.getElementById("grow");
      btnEl.addEventListener("click", replaceThing);
    </script>
  </body>
</html>
